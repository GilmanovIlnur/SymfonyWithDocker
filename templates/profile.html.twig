{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block body %}
    <a href="{{ path('profile') }}">Моя страница</a><br/>
    <a href="{{ path('app_logout') }}">Logout</a>
        {% if app.user.id == user.id %}
            <h1>Моя страница</h1>
            {% if user.userInfo %}
                Имя: {{ user.userInfo.getFirstname }}<br/>
                Фамилия: {{ user.userInfo.getLastname }}<br/><br/>
                <img style=" border-radius: 8px;width: 150px;border: 1px solid #ddd;" src={{ '/getFile/photos/' ~ user.userInfo.photoFilename }}><br/>
            {% endif %}

            <a href="/friends/{{ app.user.id }}">Мои друзья</a><br/>
            <a href="/friendsWithMe/{{ app.user.id }}">Я в друзьях</a><br/>
            <a href="{{ path('settings') }}">Настройки</a>
        {% else %}
            <h1>Страница {{ user.username }}</h1>
            {% if user.userInfo %}
                Имя: {{ user.userInfo.getFirstname }}<br/>
                Фамилия: {{ user.userInfo.getLastname }}<br/><br/>
                <img style=" border-radius: 8px;width: 150px;border: 1px solid #ddd;" src={{ '/getFile/photos/' ~ user.userInfo.photoFilename }}><br/>
            {% endif %}
            <button onclick="addFriend()">Подписаться</button>
            <button onclick="dropFriend()">Отписаться</button>
            Друзья <a href="/friends/{{ user.id }}"><i>{{ user.username }}</i></a>
            <br/>
        {% endif %}

             <div class="mb-3">
                 <a href="{{ path('users') }}">Все пользователи</a><br/>
            </div>
{% endblock %}

{% block javascripts %}
    <script>
        function addFriend(){
            $.ajax({
                url: '/addFriend/{{ user.id }}',
                method: 'POST',
            })
        }
        function dropFriend(){
            $.ajax({
                url: '/dropFriend/{{ user.id }}',
                method: 'POST',
            })
        }
    </script>
{% endblock %}
